<!DOCTYPE html>
<html>
<head>
    <title>Test Telegram Integration</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        button { background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; margin: 10px; }
        .result { margin-top: 20px; padding: 15px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Test Telegram Integration</h1>
    <p>Click the button below to test if Telegram messages are working:</p>
    
    <button onclick="testTelegram()">Send Test Message to Telegram</button>
    <div id="result"></div>

    <script>
        async function testTelegram() {
            const resultDiv = document.getElementById('result');
            const button = event.target;
            const originalText = button.textContent;
            
            button.textContent = 'Sending...';
            button.disabled = true;
            
            try {
                const testData = {
                    name: "Test Client",
                    phone: "+1234567890",
                    master: "Julya",
                    serviceRequested: "Test Service",
                    dateTime: new Date().toISOString(),
                    additionalNotes: "This is a test message"
                };
                
                const message = `ğŸ¯ *New LXGLAM Booking Request*

ğŸ‘¤ *Client:* ${testData.name}
ğŸ“ *Phone:* ${testData.phone}
ğŸ‘¨â€ğŸ’¼ *Master:* ${testData.master}
ğŸ’… *Service:* ${testData.serviceRequested}
ğŸ“… *Date & Time:* ${new Date(testData.dateTime).toLocaleString()}
ğŸ“ *Notes:* ${testData.additionalNotes}

Please contact the client to confirm the appointment.`;

                const response = await fetch("/.netlify/functions/send-booking", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(testData);
                        chat_id: "5268028095",
                        text: message,
                        parse_mode: "Markdown"
                    })
                });

                if (response.ok) {
                    resultDiv.innerHTML = '<div class="success">âœ… Test message sent successfully to Telegram! Check your chat.</div>';
                } else {
                    const errorData = await response.json();
                    throw new Error(errorData.description || "Failed to send to Telegram");
                }
            } catch (error) {
                console.error("Error:", error);
                resultDiv.innerHTML = `<div class="error">âŒ Error: ${error.message}</div>`;
            } finally {
                button.textContent = originalText;
                button.disabled = false;
            }
        }
    </script>
</body>
</html>
