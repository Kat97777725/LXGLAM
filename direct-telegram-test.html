<!DOCTYPE html>
<html>
<head>
    <title>Direct Telegram Test</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        button { background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; margin: 10px; }
        .result { margin-top: 20px; padding: 15px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Direct Telegram Test (No CORS)</h1>
    <p>This test bypasses CORS by using a proxy service:</p>
    
    <button onclick="testDirectTelegram()">Send Direct Message to Telegram</button>
    <div id="result"></div>

    <script>
        async function testDirectTelegram() {
            const resultDiv = document.getElementById('result');
            const button = event.target;
            const originalText = button.textContent;
            
            button.textContent = 'Sending...';
            button.disabled = true;
            
            try {
                // Use a CORS proxy to bypass restrictions
                const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                const telegramUrl = 'https://api.telegram.org/bot8466676132:AAHi1-a_KbTrk1KRP90I1iT6Ip4UBLRxUmg/sendMessage';
                
                const message = `🎯 *New LXGLAM Booking Request*

👤 *Client:* Test Client
📞 *Phone:* +1234567890
👨‍💼 *Master:* Julya
💅 *Service:* Test Service
📅 *Date & Time:* ${new Date().toLocaleString()}
📝 *Notes:* This is a direct test message

Please contact the client to confirm the appointment.`;

                const response = await fetch(proxyUrl + telegramUrl, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: JSON.stringify({
                        chat_id: '5268028095',
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });

                if (response.ok) {
                    resultDiv.innerHTML = '<div class="success">✅ Direct message sent successfully to Telegram! Check your chat.</div>';
                } else {
                    const errorData = await response.json();
                    throw new Error(errorData.description || 'Failed to send to Telegram');
                }
            } catch (error) {
                console.error('Error:', error);
                resultDiv.innerHTML = `<div class="error">❌ Error: ${error.message}</div>`;
            } finally {
                button.textContent = originalText;
                button.disabled = false;
            }
        }
    </script>
</body>
</html>
